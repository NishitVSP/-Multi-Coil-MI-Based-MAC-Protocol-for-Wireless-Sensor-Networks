
╔══════════════════════════════════════════════════════════════════════╗
║                                                                      ║
║    MULTI-COIL MI MAC PROTOCOL vs TRADITIONAL CSMA/CA COMPARISON     ║
║              NS-3 Network Simulator Demonstration                    ║
║                                                                      ║
╚══════════════════════════════════════════════════════════════════════╝

======================================================================
   MULTI-COIL MI MAC PROTOCOL SIMULATION
======================================================================

>>> SOURCE NODE: Initiating Communication <<<

Initial State: IDLE

[Event] Sensor interrupt detected - Data ready to send
[State Transition] IDLE -> DATA_ACQUIRE (Sensor interrupt)

[Data Acquisition] Collecting sensor data...
  Sensor reading: Temperature = 25.3°C
[State Transition] DATA_ACQUIRE -> CHANNEL_SENSING (Data ready)

[Channel Sensing] Checking if channel is available...
  Channel Status: CLEAR
[State Transition] CHANNEL_SENSING -> TRANSMIT (Channel clear)

>>> Sending REV Packet (3 times, once per coil) <<<

Transmission 1/3:

[Packet Transmission]
  Type: REV
  From: Source -> To: Destination
  Tx Coil: X
  Structure: [Carrier|Preamble|TargetID|PacketID|TxCoilID|EOF] (13 bytes)

Transmission 2/3:

[Packet Transmission]
  Type: REV
  From: Source -> To: Destination
  Tx Coil: Y
  Structure: [Carrier|Preamble|TargetID|PacketID|TxCoilID|EOF] (13 bytes)

Transmission 3/3:

[Packet Transmission]
  Type: REV
  From: Source -> To: Destination
  Tx Coil: Z
  Structure: [Carrier|Preamble|TargetID|PacketID|TxCoilID|EOF] (13 bytes)
[State Transition] TRANSMIT -> RECEIVE (Waiting for ACK)


>>> DESTINATION NODE: Processing REV Packets <<<

[Event] REV packets received on all 3 coils
[State Transition] IDLE -> RECEIVE (Packet received with correct ID)

=== Coil Selection Process ===
  Coil X: RSSI = -45.5 dBm
  Coil Y: RSSI = -52.3 dBm
  Coil Z: RSSI = -48.7 dBm
  Selected Coil: X (RSSI = -45.5 dBm)

[Preparing ACK] Using best coil pair
[State Transition] RECEIVE -> CHANNEL_SENSING (REV received, sending ACK)

[Channel Sensing] Channel is clear
[State Transition] CHANNEL_SENSING -> TRANSMIT (Channel clear)

[Packet Transmission]
  Type: ACK
  From: Destination -> To: Source
  Tx Coil: X
  Structure: [Carrier|PacketID|TxCoilID|RxCoilID|EOF] (5 bytes)
[State Transition] TRANSMIT -> RECEIVE (Waiting for data)


>>> SOURCE NODE: ACK Received <<<

[Event] ACK received with coil pair: X
  Coil pair established for communication
[State Transition] RECEIVE -> CHANNEL_SENSING (Ready to send data)

[Channel Sensing] Channel is clear
[State Transition] CHANNEL_SENSING -> TRANSMIT (Channel clear)

[Packet Transmission]
  Type: DATA
  From: Source -> To: Destination
  Tx Coil: X
  Structure: [Carrier|PacketID|Data|EOF] (3-19 bytes)
[State Transition] TRANSMIT -> IDLE (Transmission complete)


>>> DESTINATION NODE: Data Received <<<

[Event] Data packet received successfully
  Data: Temperature = 25.3°C
[State Transition] RECEIVE -> IDLE (Data received completely)

======================================================================
   COMMUNICATION COMPLETE
======================================================================


======================================================================
   TRADITIONAL CSMA/CA MAC PROTOCOL SIMULATION
======================================================================

>>> SOURCE NODE: Initiating Communication <<<

Initial State: IDLE

[Event] Data ready to send
[State Transition] IDLE -> DATA_ACQUIRE (Data collection)

[Data Acquisition] Collecting sensor data...
  Sensor reading: Temperature = 25.3°C
[State Transition] DATA_ACQUIRE -> CHANNEL_SENSING (Data ready)

[Channel Sensing] Checking if channel is available...
  Channel Status: CLEAR
[State Transition] CHANNEL_SENSING -> TRANSMIT (Channel clear)

>>> Sending RTS (Request to Send) <<<

[Packet Transmission]
  Type: RTS
  From: Source -> To: Destination
  Structure: [RTS Control Frame] (20 bytes)
[State Transition] TRANSMIT -> RECEIVE (Waiting for CTS)


>>> DESTINATION NODE: Processing RTS <<<

[Event] RTS received
[State Transition] IDLE -> RECEIVE (Packet received)

[Preparing CTS]
[State Transition] RECEIVE -> CHANNEL_SENSING (RTS received, sending CTS)

[Channel Sensing] Channel is clear
[State Transition] CHANNEL_SENSING -> TRANSMIT (Channel clear)

>>> Sending CTS (Clear to Send) <<<

[Packet Transmission]
  Type: CTS
  From: Destination -> To: Source
  Structure: [Carrier|PacketID|TxCoilID|RxCoilID|EOF] (5 bytes)
[State Transition] TRANSMIT -> RECEIVE (Waiting for data)


>>> SOURCE NODE: CTS Received <<<

[Event] CTS received - Channel reserved
[State Transition] RECEIVE -> TRANSMIT (Ready to send data)

>>> Sending DATA Packet <<<

[Packet Transmission]
  Type: DATA
  From: Source -> To: Destination
  Structure: [Carrier|PacketID|Data|EOF] (3-19 bytes)

>>> Waiting for ACK <<<
[State Transition] TRANSMIT -> RECEIVE (Waiting for ACK)


>>> DESTINATION NODE: Data Received <<<

[Event] Data packet received successfully
  Data: Temperature = 25.3°C
[State Transition] RECEIVE -> TRANSMIT (Sending ACK)

>>> Sending ACK <<<

[Packet Transmission]
  Type: ACK
  From: Destination -> To: Source
  Structure: [Carrier|PacketID|TxCoilID|RxCoilID|EOF] (5 bytes)
[State Transition] TRANSMIT -> IDLE (Transmission complete)


>>> SOURCE NODE: ACK Received <<<

[Event] ACK received - Transmission successful
[State Transition] RECEIVE -> IDLE (Communication complete)

======================================================================
   COMMUNICATION COMPLETE

======================================================================


======================================================================
   PROTOCOL COMPARISON
======================================================================

┌─────────────────────────────────────┬──────────────────┬──────────────────┐
│ Metric                              │ Multi-Coil MI    │ CSMA/CA          │
├─────────────────────────────────────┼──────────────────┼──────────────────┤
│ Total Packets Sent                  │                5 │                4 │
│ State Transitions                   │               12 │               13 │
│ Total Energy (µJ)                   │         11183.84 │         14058.40 │
└─────────────────────────────────────┴──────────────────┴──────────────────┘

======================================================================
   KEY ADVANTAGES OF MULTI-COIL MI MAC
======================================================================

✓ Energy Efficiency: 20.4% energy saving
✓ Spatial Reuse: Multiple coil pairs allow concurrent transmissions
✓ Directional Communication: RSSI-based coil selection optimizes link
✓ Collision Avoidance: Channel sensing + coil diversity reduces collisions
✓ Lower Overhead: Fewer control packets (REV→ACK→DATA vs RTS→CTS→DATA→ACK)
✓ Dual Environment: Works in both terrestrial and underwater networks

======================================================================
   REFERENCE: Paper Table II - Current Consumption per State
======================================================================

  Idle:            50 µA   (Ultra-low power listening)
  Receive:        200 µA   (Packet decoding)
  Data Acquire:   250 µA   (Sensor data collection)
  Channel Sensing: 200 µA   (Carrier detection)
  Transmit:      1120 µA   (Packet transmission)
